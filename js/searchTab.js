// const redLineData = [
//   {
//     "id": "Guandu",
//     "station": "關渡站",
//     "title": "爐鍋咖啡 Luguo Cafe",
//     "time": "週二 ~ 週日：12:00 ~ 20:00(週一公休)",
//     "address": "台北市北投區大度路三段296巷39號",
//     "tel": "(02)2891-5990",
//     "web": "https://www.luguocafe.com/",
//     "map": "https://maps.app.goo.gl/RgXiwArRWj2KWYfL8",
//     "other": "店貓、賣咖啡",
//     "tags": ["店貓"]
//   },
//   {
//     "id": "Zhishan",
//     "station": "芝山站",
//     "title": "小貓花園 CAFE' & CATS 1998",
//     "time": "週一 ~ 週日：12:00 ~ 22:00 (週二公休)",
//     "address": "台北市士林區福華路129號1樓",
//     "tel": "(02)2835-3335",
//     "fb": "https://www.facebook.com/nekocafe1998/",
//     "map": "https://maps.app.goo.gl/soerTXycZ2beqbBZ8",
//     "other": "禁12歲以下(國中生以下)",
//     "tags": ["禁年齡"]
//   }, {
//     "id": "Zhishan",
//     "station": "芝山站",
//     "title": "元氣貓主題餐廳",
//     "time": "週二 ~ 週五：14:00 ~ 22:00 (週一公休)、週日:13:00 ~ 22:00",
//     "address": "台北市士林區中山北路五段829巷30號",
//     "tel": "(02)2835-3336",
//     "fb": "https://www.facebook.com/genkicat/",
//     "map": "https://maps.app.goo.gl/RzuMPoBQSUYf2p8QA",
//     "other": "主要緬因貓,12歲以下需打電話確認",
//     "tags": ["禁年齡", "品種貓"]

//   },
//   {
//     "id": "Yuanshan",
//     "station": "圓山站",
//     "title": "啡創工廠 Future Factory",
//     "time": "週一 ~ 週日：12:00 ~ 20:00",
//     "address": "台北市大同區民族西路31巷18",
//     "tel": "(02) 2586-1010",
//     "fb": "https://www.facebook.com/future.factory.coffee",
//     "map": "https://maps.app.goo.gl/WsnZMBgjbkHQMVDA6",
//     "other": "店貓",
//     "tags": ["店貓"]
//   },
//   {

//     "id": "Shuanglian",
//     "station": "雙連站",
//     "title": "貓小舖-貓咪主題文創商品專賣赤峰店",
//     "time": "週一~週日：12:30~18:30",
//     "address": "台北市大同區赤峰街53巷14號1樓",
//     "tel": "(02) 2559-0060",
//     "fb": "https://www.facebook.com/3catscafe",
//     "web": "https://www.3catshop.com.tw/",
//     "map": "https://maps.app.goo.gl/JHrfJY8mvgGhGxzE6",
//     "other": "店貓、貓咪文創商品",
//     "tags": ["店貓"]
//   },
//   {
//     "id": "Shuanglian",
//     "station": "雙連站",
//     "title": "紅玥緬因貓咖啡藝廊",
//     "time": "週一~週日：13:00 ~ 21:00",
//     "address": "台北市大同區赤峰街71巷4號",
//     "tel": "(02) 2550-0310",
//     "fb": "https://www.facebook.com/redmoon.mainecoon",
//     "map": "https://maps.app.goo.gl/D9uyZ7mJuztAKir47",
//     "other": "禁6歲孩童、主打緬因",
//     "tags": ["店貓", "禁年齡"]
//   },
//   {
//     "id": "Shuanglian",
//     "station": "雙連站",
//     "title": "Double Like 雙倍喜歡",
//     "time": "週五 ~ 週日：11:30 ~ 20:30 (週一~週四公休)",
//     "address": "台北市大同區赤峰街47巷25號2樓",
//     "tel": "(02)2552-7819",
//     "fb": "https://www.facebook.com/doublelikecatcaffee/",
//     "map": "https://maps.app.goo.gl/SSgLvABgRE1927JV9",
//     "other": "店貓",
//     "tags": ["店貓"]
//   },
//   {
//     "id": "Zhongshan",
//     "station": "中山站",
//     "title": "Double Like 雙倍喜歡",
//     "time": "週五 ~ 週日：11:30 ~ 20:30 (週一~週四公休)",
//     "address": '台北市大同區赤峰街47巷25號2樓',
//     "tel": "(02)2552-7819",
//     "fb": "https://www.facebook.com/doublelikecatcaffee/",
//     "map": "https://maps.app.goo.gl/SSgLvABgRE1927JV9",
//     "other": "店貓",
//     "tags": ["店貓"]
//   },

//   {
//     "id": "Zhongshan",
//     "station": "中山站",
//     "title": "1+1Together Republic",
//     "time": "週一 ~ 週日：12:30 ~ 20:00(週二公休)",
//     "address": "台北市中山北路二段26巷中山區No.10-1號2F",
//     "tel": "(02)2568-1997",
//     "fb": "https://www.facebook.com/1plus1.Together.Republic",
//     "map": "https://maps.app.goo.gl/6mUGLZMBku4bYweY6",
//     "other": "店貓、寵物友善",
//     "tags": ["店貓", "寵物友善餐廳"]
//   },
//   {
//     "id": "Zhongshan",
//     "station": "中山站",
//     "title": "貓妝自家烘焙咖啡屋",
//     "time": "週日一~ 週五：11:30 ~ 21:30、週六:09:00 ~ 22:00、週日 :10:00~20:00",
//     "address": "台北市大同區長安西路64號",
//     "tel": "(02)2550-0561",
//     "fb": "https://www.facebook.com/maskcatcafe.25500561/",
//     "map": "https://maps.app.goo.gl/Zk1gYjSTpZQPPnXa9",
//     "other": "店貓",
//     "tags": ["店貓"]
//   },
//   {
//     "id": "Zhongshan",
//     "station": "中山站",
//     "title": "貓妝自家烘焙咖啡屋",
//     "time": "週日一~ 週五：11:30 ~ 21:30、週六:09:00 ~ 22:00、週日 :10:00~20:00",
//     "address": "台北市大同區長安西路64號",
//     "tel": "(02)2550-0561",
//     "fb": "https://www.facebook.com/maskcatcafe.25500561/",
//     "map": "https://maps.app.goo.gl/Zk1gYjSTpZQPPnXa9",
//     "other": "店貓",
//     "tags": ["店貓"]
//   },
//   {
//     "id": "Zhongshan",
//     "station": "中山站",
//     "title": "碧耳貓 BeerCat 精釀啤酒",
//     "time": "週一周二：20:00 ~ 00:00、週三週四週日：16:00 ~ 00:00、週五 ~ 週六：16:00 ~ 02:00",
//     "address": "台北市中山區長安西路8號",
//     "tel": "(02)2558-1518",
//     "fb": "https://www.facebook.com/BeerCatTaipei/",
//     "map": "https://maps.app.goo.gl/VcXL3fZZvquz8zLf8",
//     "other": '店貓',
//     "tags": ["店貓"]
//   },
//   {
//     "id": "Zhongshan",
//     "station": "中山站",
//     "title": "2730貳柒參零咖啡",
//     "time": "週一 ~ 週四：12:00 ~ 22:00 (週三公休)、週末：11:30 ~ 22:00",
//     "address": "台北市大安區延吉街288號",
//     "tel": "(02)2708-8230",
//     "fb": "https://www.facebook.com/2730.cafe/",
//     "map": "https://maps.app.goo.gl/tCyaDijYphFGkWES6",
//     "other": "店貓",
//     "tags": ["店貓"]
//   },
//   {
//     "id": "Chian-Kai-Shek",
//     "station": "中正紀念堂站",
//     "title": "疍宅Egghost三元店",
//     "time": "12:00~23:00 / 不定期公休",
//     "address": "台北市中正區三元街176號1樓",
//     "tel": "(02)2521-5361",
//     "web": "https://www.egghost-dessert.com/index",
//     "fb": "https://www.facebook.com/EggHostCafe/",
//     "instagram": "https://www.instagram.com/egghost_dessert/",
//     "map": "https://maps.app.goo.gl/qcVXTnmtNsr4jQmt7",
//     "other": "店貓、寵物友善餐廳(限貓咪)",
//     "tags": ["店貓", "寵物友善餐廳"]
//   },
//   {
//     "id": "Xinyi-Anhe",
//     "station": "信義安和站",
//     "title": "2730貳柒參零咖啡",
//     "time": "週一 ~ 週四：12:00 ~ 22:00 (週三公休)、週末：11:30 ~ 22:00",
//     "address": "台北市大安區延吉街288號",
//     "tel": "(02)2708-8230",
//     "fb": "https://www.facebook.com/2730.cafe/",
//     "map": "https://maps.app.goo.gl/tCyaDijYphFGkWES6",
//     "other": "店貓",
//     "tags": ["店貓"]
//   },
//   {
//     "id": "Taipei101",
//     "station": "台北101/世貿站",
//     "title": "加爾第咖啡(莊敬店)",
//     "time": "週一二三五六：10:00 ~ 22:00、週四日：10:00 ~ 18:00",
//     "address": "台北市信義區吳興街269巷1弄21號",
//     "tel": "(02)2345-1136",
//     "web": "https://kaldi-coffee.com.tw/mainwebsite/",
//     "map": "https://maps.app.goo.gl/VDvoJU51jebwKrUg7",
//     "other": "店貓",
//     "tags": ["店貓"]
//   }
// ];
// const blueLineData =[
//   {
//     "id":"Nangang-Exhibition",
//     "station":"南港展覽館",
//     "title":"幸福肥計劃咖啡",
//     "time":"周一~周二:公休、周三~周日:09:00~19:00",
//     "address":"台北市南港區南港路一段171巷16號",
//     "tel":"(02)27830602",
//     "fb":"https://www.facebook.com/happinessfei/",

//     "map":"https://maps.app.goo.gl/DxrBpRS5JRCFBhYz9",
//     "other":"禁12歲以下",
//     "tags":["禁年齡"]

//   } ,
//   {
//     "id":"Yongchun",
//     "station":"永春站",
//     "title":"聞山咖啡永春有貓店",
//     "time":"週一 ~ 週日：12:00 ~ 22:00",
//     "address":"台北市信義區忠孝東路五段372巷27弄73-1號",
//     "tel":"(02) 8789-6797",
//     "web":"https://www.wenshanroasting.com/",

//     "map":"https://maps.app.goo.gl/EvxwyZQ33fijs4Gm8",
//     "other":"店貓",
//     "tags":["店貓"]

//   },
//   {
//     "id":"TCH",
//     "station":"市政府站",
//     "title":"貓樂貓咖啡 信義遠百店",
//     "time":"週一 ~ 週日：11:00 ~ 21:30、週五 ~ 週六：11:00 ~ 22:00",
//     "address":"台北市信義區松仁路58號7樓",
//     "tel":"(02) 8786-6708",
//     "fb":"https://www.facebook.com/catfuncafexy",

//     "map":"https://maps.app.goo.gl/fqtFzi4HA1jVt5498",
//     "other":"品種貓、禁12歲以下(緬因、布偶、挪威)",
//     "tags":["品種貓","禁年齡"]

//   },
//    {
//     "id":"Memorial-Hall",
//     "station":"國父紀念館站",
//     "title":"ToastChat",
//     "time":"週一 ~ 週日：12:00 ~ 22:00",
//     "address":"台北市大安區光復南路290巷58號A1樓",
//     "tel":"(02)2721-5661",
//     "fb":"https://www.facebook.com/ToastChat",

//     "map":"https://maps.app.goo.gl/4u25LDRdSg4ppWJ57",
//     "other":"禁12歲以下",
//     "tags":["禁年齡"]

//   },

//   {
//     "id":"Zhongxiao-Xinsheng",
//     "station":"忠孝新生站",
//     "title":"咖啡實驗室",
//     "time":"週一 ~ 週五：1200-1900、周六、周日:12:00~20:00",
//     "address":"台北市中正區忠孝東路二段64巷6號",
//     "tel":"(02)2341-9880",
//     "fb":"https://www.facebook.com/people/%E5%92%96%E5%95%A1%E5%AF%A6%E9%A9%97%E5%AE%A4Coffee-lab/100064192833363/",

//     "map":"https://maps.app.goo.gl/aGEaYpgyKPVjhLrw5",
//     "other":"店貓",
//     "tags":["店貓"]

//   },
//    {
//     "id":"Zhongxiao-Xinsheng",
//     "station":"忠孝新生站",
//     "title":"Take Out Burger & Cafe",
//     "time":"週一~ 週五：11:00 ~ 22:30、週六 ~ 週日： 11:00 ~ 16:00、17:00 ~ 22:30",
//     "address":"台北市中正區新生南路一段56巷6號",
//     "tel":"(02)2321-0020",
   
//     "map":"https://maps.app.goo.gl/DpqPRto2bMP8d1zt5",
//     "other":"店貓",
//     "tags":["店貓"]

//   },
//   {
//     "id":"Shandao-Temple",
//     "station":"善導寺站",
//     "title":"浪浪別哭",
//     "time":"週一 ~ 週日：12:00 ~ 21:00",
//     "address":"台北市中正區林森北路9巷13號",
//     "tel":"(02) 2356-0766",

//     "map":"https://maps.app.goo.gl/1tXBgYWhwHdvxGpF8",
//     "other":"中途、可領養",
//     "tags":["中途"]

//   },
//   {
//      "id":"Ximen",
//     "station":"西門站",
//     "title":"早初entry time",
//     "time":"週一 ~ 週五：10:00 ~ 16:30 (週三公休)、週六、日：10:00 ~ 17:00",
//     "address":"台北市萬華區成都路165號",
//     "tel":"09-08811100",
//     "fb":"https://www.facebook.com/XiaoChu.isFlying/",
//     "instagram":"https://www.instagram.com/chu_entrytime/",
//     "map":"https://maps.app.goo.gl/HxwBxmBDRihqvLtW7",
//     "other":"店貓、明信片",
//     "tags":["店貓"]
//   },
//    {
//      "id":"Ximen",
//     "station":"西門站",
//     "title":"FUFUCatCafe",
//     "time":"週一 ~ 週日：12:00 ~ 21:00",
//     "address":"台北市萬華區武昌街二段53號3樓",
//     "tel":"(02)2388-3722",
//     "fb":"https://www.facebook.com/FUFUCatCafe/?_rdr",
    
//     "map":"https://maps.app.goo.gl/akJH9FGBf48t3FZg7",
//     "other":"品種貓、禁12歲以下",
//     "tags":["品種貓","禁年齡"]
//   },
//     {
//     "id":"Jiangzicui",
//     "station":"江子翠站",
//     "title":"短短DuanDuan",
//     "time":"平日和週六日1100-1900、(週三、四公休)" ,
//     "address":"新北市板橋區仁化街64巷16號",
//     "tel":"09-16886061",
//     "fb":"https://www.facebook.com/duanduanisthebestcat",
//     "instagram":"https://www.instagram.com/duanduan_chanmao/?hl=zh-tw",
//     "map":"https://maps.app.goo.gl/dtMFxMB53roNUXz5A",
//     "other":"中途之家",
//     "tags":["中途"]
//   },
//   {
    
//     "id":"Jiangzicui",
//     "station":"江子翠站",
//     "title":"堤柇寵物餐廳",
//     "time":"週一 ~ 週日：9:00 ~ 21:00",
//     "address":"新北市板橋區文聖街194號",
//     "tel":"(02) 2250-1377",
//     "fb":"https://zh-tw.facebook.com/tiere.pethotel/",
//     "map":"https://maps.app.goo.gl/Bti4T1VrQmGRd9hN9",
//     "other":"寵物住宿/寵物SPA/寵物安親",
//     "tags":["店貓"]
//   },
//    {
    
//     "id":"Jiangzicui",
//     "station":"江子翠站",
//     "title":"一隅有貓",
//     "time":"週一~週日:11:00~20:30(周四公休)",
//     "address":"新北市板橋區文化路二段182巷3弄16號1樓",
//     "tel":"(02)22557879",
    
//     "map":"https://maps.app.goo.gl/AnVdk53DThzi6jrf9",
//     "other":"可領養",
//     "tags":["領養"]
//   },
//    {
//      "id":"Xinpu",
//     "station":"新埔站",
//     "title":"貓欸",
//     "time":"週二：12:00 ~ 21:00、週三 ~ 週日：11:00 ~ 21:00 (週一公休)",
//     "address":"新北市板橋區文化路一段270巷3弄6號",
//     "tel":"(02)8528-1127(不接聽電話，僅接受粉絲團預約)",
//     "fb":"https://www.facebook.com/Camulet/",
//     "map":"https://maps.app.goo.gl/jhYULkVFmifg5r8aA",
//     "other":"（非親子餐廳）",
//     "tags":["很多貓"]
//   },
//   {
//     "id":"Banciao",
//     "station":"板橋站",
//     "title":"貳巷貓弄Catfeine",
//     "time":"週一~週日11：00-20：00",
//     "address":"新北市板橋區光正街3號（近板橋車站、捷運站、板橋站前廣場）",
//     "tel":"(02)29680418",
//     "fb":"https://www.facebook.com/2ndAlleyCatfeine?gad_source=6&gclid=Cj0KCQiAsaS7BhDPARIsAAX5cSCsk36o2_OHDFjhmlWNNB5HZ3-LKuJ9-JzoLy58vDx4enHq4jcLsC0aAqJtEALw_wcB&_rdr",
//     "tiktok":"https://www.tiktok.com/@user3867638185949?_t=8gHFiebbHs7&_r=1",
//     "map":"https://maps.app.goo.gl/MJuqwyyts9U5kY4j9",
//     "other":"很多貓",
//     "tags":["很多貓"]

//   },
// ]

// let currentData = []; // 存儲當前選中的資料集

//     // 1. 绑定標籤選擇事件
//     document.querySelectorAll(".tag").forEach(tag => {
//       tag.addEventListener("click", (e) => {
//         const selectedTag = e.target.dataset.tag;
//         console.log('選擇的標籤:', selectedTag); // 調試用
//         // 根據標籤過濾資料
//         currentData = [...blueLineData, ...redLineData].filter(item => item.tags.includes(selectedTag));
//         console.log('篩選後的資料:', currentData); // 調試用
//         displayInfos(currentData);
//       });
//     });

//     // 2. 绑定地圖點擊事件 (分別處理藍線和紅線資料)
//     document.querySelectorAll(".point").forEach((point) => {
//       point.addEventListener("click", (e) => {
//         const id = e.target.dataset.id;
//         console.log('點擊的地點ID:', id); // 調試用
        
//         // 判斷該點屬於哪條線
//         const isBlueLine = point.classList.contains("blueLine");
//         const data = isBlueLine ? blueLineData : redLineData;
        
//         currentData = data.filter(item => item.id === id);
//         console.log('選中的資料:', currentData); // 調試用
//         displayInfos(currentData);
//       });
//     });

//     // 3. 顯示資料
//     function displayInfos(infos) {
//       const infoBox = document.getElementById("infoBox");
//       const infoContent = document.getElementById("infoContent");

//       if (infos.length > 0) {
//         // 清空之前的內容
//         infoContent.innerHTML = "";

//         // 顯示資料
//         infos.forEach(info => {
//           const icons = `
//             <div class="icon">
//               ${info.web ? `<a href="${info.web}" target="_blank"><img src="./img/web.png" alt="網站"></a>` : ""}
//               ${info.fb ? `<a href="${info.fb}" target="_blank"><img src="./img/facebook.png" alt="fb"></a>` : ""}
//               ${info.instagram ? `<a href="${info.instagram}" target="_blank"><img src="./img/instagram (1).png" alt="instagram"></a>` : ""}
//               ${info.tiktok ? `<a href="${info.tiktok}" target="_blank"><img src="./img/social-media (2).png" alt="tiktok"></a>` : ""}
//               ${info.map ? `<a href="${info.map}" target="_blank"><img src="./img/pin.png" alt="map"></a>` : ""}
//             </div>
//           `;
          
//           infoContent.innerHTML += `
//             <div class="info-item">
//               <h3>${info.title} (${info.station})</h3>
//               <hr class="title-hr">
//               <p><strong>營業時間：</strong>${info.time}</p>
//               <p><strong>地址：</strong>${info.address}</p>
//               <p><strong>電話：</strong>${info.tel}</p>
//               <p><strong>其他：</strong>${info.other}</p>
//               <p><strong>標籤：</strong>${info.tags.join(", ")}</p>
//               ${icons}
//             </div>
//             <hr>
//           `;
//         });

//         infoBox.style.display = "block";
//       } else {
//         infoContent.innerHTML = "<p>沒有找到相關的地點。</p>";
//         infoBox.style.display = "block";
//       }
//     }

//     // 4. 關閉信息框
//     document.getElementById("closeBtn").addEventListener("click", () => {
//       const infoBox = document.getElementById("infoBox");
//       infoBox.style.display = "none";
//     });

// 篩選條件
let selectedTags = [];

// 綁定篩選標籤事件
document.querySelectorAll(".tag").forEach((tag) => {
  tag.addEventListener("click", (e) => {
    const filterTag = e.target.dataset.tag;
    toggleTagSelection(filterTag);
    filterAndDisplayData();
  });
});

// 切換標籤選擇狀態
function toggleTagSelection(tag) {
  if (selectedTags.includes(tag)) {
    selectedTags = selectedTags.filter((t) => t !== tag);
  } else {
    selectedTags.push(tag);
  }
}

// 過濾並顯示資料
function filterAndDisplayData() {
  const filteredData = redLineData.filter((item) =>
    selectedTags.every((tag) => item.tags.includes(tag))
  );
  displayInfos(filteredData);
}

// 顯示資料
function displayInfos(infos) {
  const infoBox = document.getElementById("infoBox");
  const infoContent = document.getElementById("infoContent");

  if (infos.length > 0) {
    // 清空內容
    infoContent.innerHTML = "";
    infos.forEach((info) => {
      const icons = `
      <div class="icon">
        ${info.web ? `<a href="${info.web}" target="_blank"><img src="./img/web.png" alt="網站"></a>` : ""}
        ${info.fb ? `<a href="${info.fb}" target="_blank"><img src="./img/facebook.png" alt="fb"></a>` : ""}
        ${info.instagram ? `<a href="${info.instagram}" target="_blank"><img src="./img/instagram (1).png" alt="instagram"></a>` : ""}
        ${info.map ? `<a href="${info.map}" target="_blank"><img src="./img/pin.png" alt="map"></a>` : ""}
      </div>`;
      infoContent.innerHTML += `
      <div class="info-item">
        <h3>${info.title} (${info.station})</h3>
        <hr class="title-hr">
        <p><strong>營業時間：</strong>${info.time}</p>
        <p><strong>地址：</strong>${info.address}</p>
        <p><strong>電話：</strong>${info.tel}</p>
        <p><strong>其他：</strong>${info.other}</p>
        <p><strong>標籤：</strong>${info.tags.join(", ")}</p>
        ${icons}
      </div>
      <hr>`;
    });

    infoBox.style.display = "block";
  } else {
    infoContent.innerHTML = "<p>未找到符合篩選條件的資料。</p>";
    infoBox.style.display = "block";
  }
}

// 關閉資訊框
document.getElementById("closeBtn").addEventListener("click", () => {
  const infoBox = document.getElementById("infoBox");
  infoBox.style.display = "none";
});